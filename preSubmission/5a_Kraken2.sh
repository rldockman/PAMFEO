#!/bin/bash

##########################################################################################
# Notes
##########################################################################################
# Run as array with array=1-(number_of_contigs)

##########################################################################################
# Modules
##########################################################################################
module load Kraken2/2.1.3-gompi-2022a

##########################################################################################
# Script
##########################################################################################
file=$(awk "NR==${SLURM_ARRAY_TASK_ID}" fragfiles.txt)
echo $file

kraken2 --use-names --threads 24 --db /db/kraken2 --report krakenreports/"$file"_report.txt \
--minimum-hit-groups 3 contig_frag/"$file" > krakenout/"$file".kraken